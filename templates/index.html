<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåΩ Pr√©diction Rendement Ma√Øs - Afrique</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #1a5f2a 0%, #2d8a3e 50%, #f4d03f 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            color: white;
            padding: 40px 20px;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-size: 2.8em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        /* Main Content */
        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 900px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }

        /* Cards */
        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            animation: fadeInUp 0.8s ease;
        }

        .card-title {
            font-size: 1.5em;
            color: #1a5f2a;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            font-size: 1.2em;
        }

        /* Form Styles */
        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1em;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }

        .form-group select:focus,
        .form-group input:focus {
            border-color: #2d8a3e;
            outline: none;
            box-shadow: 0 0 0 3px rgba(45, 138, 62, 0.2);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* Button */
        .btn-predict {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #1a5f2a, #2d8a3e);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-predict:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(26, 95, 42, 0.4);
        }

        .btn-predict:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .btn-predict.loading i {
            animation: spin 1s linear infinite;
        }

        /* Results */
        .results-container {
            display: none;
        }

        .results-container.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .result-main {
            background: linear-gradient(135deg, #1a5f2a, #2d8a3e);
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 20px;
        }

        .result-value {
            font-size: 3.5em;
            font-weight: 700;
            margin: 10px 0;
        }

        .result-unit {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .result-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .result-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .result-item-value {
            font-size: 1.8em;
            font-weight: 600;
            color: #1a5f2a;
        }

        .result-item-label {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .confidence-badge {
            display: inline-block;
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 500;
            margin-top: 15px;
        }

        .confidence-high {
            background: #d4edda;
            color: #155724;
        }

        .confidence-medium {
            background: #fff3cd;
            color: #856404;
        }

        .confidence-low {
            background: #f8d7da;
            color: #721c24;
        }

        /* Info Section */
        .info-section {
            margin-top: 30px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .info-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }

        .info-card:hover {
            transform: translateY(-5px);
        }

        .info-card i {
            font-size: 2.5em;
            color: #2d8a3e;
            margin-bottom: 15px;
        }

        .info-card h3 {
            color: #333;
            margin-bottom: 10px;
        }

        .info-card p {
            color: #666;
            font-size: 0.9em;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            color: white;
            margin-top: 40px;
        }

        .footer a {
            color: white;
            text-decoration: none;
        }

        /* Animations */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Error Message */
        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            display: none;
        }

        .error-message.show {
            display: block;
        }

        /* Model Badge */
        .model-badge {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            display: inline-block;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>üåΩ Maize Yield Predictor</h1>
            <p>Pr√©diction du rendement du ma√Øs en Afrique par Intelligence Artificielle</p>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Form Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-seedling"></i>
                    Param√®tres de Culture
                </h2>

                <form id="predictionForm">
                    <div class="form-group">
                        <label for="country">üåç Pays</label>
                        <select id="country" required>
                            <option value="">S√©lectionnez un pays...</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="season">üìÖ Saison de Culture</label>
                        <select id="season" required>
                            <option value="Main">Principale (Main)</option>
                            <option value="Secondary">Secondaire (Secondary)</option>
                            <option value="Minor">Mineure (Minor)</option>
                            <option value="Off-season">Hors-saison (Off-season)</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="plantingMonth">üå± Mois de Plantation</label>
                            <select id="plantingMonth" required>
                                <option value="1">Janvier</option>
                                <option value="2">F√©vrier</option>
                                <option value="3" selected>Mars</option>
                                <option value="4">Avril</option>
                                <option value="5">Mai</option>
                                <option value="6">Juin</option>
                                <option value="7">Juillet</option>
                                <option value="8">Ao√ªt</option>
                                <option value="9">Septembre</option>
                                <option value="10">Octobre</option>
                                <option value="11">Novembre</option>
                                <option value="12">D√©cembre</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="harvestMonth">üåæ Mois de R√©colte</label>
                            <select id="harvestMonth" required>
                                <option value="1">Janvier</option>
                                <option value="2">F√©vrier</option>
                                <option value="3">Mars</option>
                                <option value="4">Avril</option>
                                <option value="5">Mai</option>
                                <option value="6">Juin</option>
                                <option value="7">Juillet</option>
                                <option value="8" selected>Ao√ªt</option>
                                <option value="9">Septembre</option>
                                <option value="10">Octobre</option>
                                <option value="11">Novembre</option>
                                <option value="12">D√©cembre</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="area">üìê Surface Cultiv√©e (hectares)</label>
                        <input type="number" id="area" min="0.1" max="50000" step="0.1" value="500" required>
                    </div>

                    <div class="form-group">
                        <label for="system">‚öôÔ∏è Syst√®me de Production</label>
                        <select id="system" required>
                            <option value="rainfed">üåßÔ∏è Pluvial (Rainfed)</option>
                            <option value="irrigated">üíß Irrigu√© (Irrigated)</option>
                            <option value="commercial_mechanized">üöú Commercial M√©canis√©</option>
                            <option value="traditional_small_scale">üë®‚Äçüåæ Traditionnel Petite √âchelle</option>
                            <option value="general_unknown">‚ùì Non Sp√©cifi√©</option>
                        </select>
                    </div>

                    <button type="submit" class="btn-predict" id="predictBtn">
                        <i class="fas fa-magic"></i>
                        Pr√©dire le Rendement
                    </button>

                    <div class="error-message" id="errorMessage"></div>
                </form>
            </div>

            <!-- Results Card -->
            <div class="card">
                <h2 class="card-title">
                    <i class="fas fa-chart-line"></i>
                    R√©sultats de la Pr√©diction
                </h2>

                <div class="results-container" id="results">
                    <div class="result-main">
                        <div>Rendement Pr√©dit</div>
                        <div class="result-value" id="yieldValue">--</div>
                        <div class="result-unit">tonnes / hectare</div>
                        <span class="model-badge" id="modelBadge">
                            <i class="fas fa-robot"></i> Random Forest
                        </span>
                    </div>

                    <div class="result-details">
                        <div class="result-item">
                            <div class="result-item-value" id="productionValue">--</div>
                            <div class="result-item-label">Production Totale (tonnes)</div>
                        </div>
                        <div class="result-item">
                            <div class="result-item-value" id="areaValue">--</div>
                            <div class="result-item-label">Surface (ha)</div>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 20px;">
                        <span class="confidence-badge" id="confidenceBadge">Confiance: --</span>
                    </div>
                </div>

                <div id="placeholder" style="text-align: center; color: #999; padding: 50px 0;">
                    <i class="fas fa-arrow-left" style="font-size: 3em; margin-bottom: 20px;"></i>
                    <p>Remplissez le formulaire et cliquez sur "Pr√©dire" pour voir les r√©sultats</p>
                </div>
            </div>
        </div>

        <!-- Info Section -->
        <section class="info-section">
            <div class="info-grid">
                <div class="info-card">
                    <i class="fas fa-database"></i>
                    <h3>17,000+ Donn√©es</h3>
                    <p>Entra√Æn√© sur des donn√©es r√©elles de rendements agricoles africains</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-globe-africa"></i>
                    <h3>54 Pays</h3>
                    <p>Couverture compl√®te du continent africain</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-brain"></i>
                    <h3>Random Forest</h3>
                    <p>Algorithme ML avec R¬≤ = 0.78 de pr√©cision</p>
                </div>
                <div class="info-card">
                    <i class="fas fa-bolt"></i>
                    <h3>Temps R√©el</h3>
                    <p>Pr√©dictions instantan√©es via API REST</p>
                </div>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <p>
                <i class="fas fa-code"></i> Projet Data Science 2026 | 
                <a href="/docs" target="_blank"><i class="fas fa-book"></i> API Documentation</a> |
                <a href="https://github.com" target="_blank"><i class="fab fa-github"></i> GitHub</a>
            </p>
            <p style="margin-top: 10px; opacity: 0.8;">
                Source: HarvestStat Africa Dataset
            </p>
        </footer>
    </div>

    <script>
        // Countries data - Complete list matching API supported countries
        const countries = [
            {code: 'AO', name: 'Angola'}, {code: 'BF', name: 'Burkina Faso'},
            {code: 'BI', name: 'Burundi'}, {code: 'BJ', name: 'B√©nin'},
            {code: 'BW', name: 'Botswana'}, {code: 'CD', name: 'RD Congo'},
            {code: 'CF', name: 'Centrafrique'}, {code: 'CG', name: 'Congo'},
            {code: 'CI', name: "C√¥te d'Ivoire"}, {code: 'CM', name: 'Cameroun'},
            {code: 'CV', name: 'Cap-Vert'}, {code: 'DJ', name: 'Djibouti'},
            {code: 'DZ', name: 'Alg√©rie'}, {code: 'EG', name: '√âgypte'},
            {code: 'ER', name: '√ârythr√©e'}, {code: 'ET', name: '√âthiopie'},
            {code: 'GA', name: 'Gabon'}, {code: 'GH', name: 'Ghana'},
            {code: 'GM', name: 'Gambie'}, {code: 'GN', name: 'Guin√©e'},
            {code: 'GQ', name: 'Guin√©e √©quatoriale'}, {code: 'GW', name: 'Guin√©e-Bissau'},
            {code: 'KE', name: 'Kenya'}, {code: 'KM', name: 'Comores'},
            {code: 'LR', name: 'Liberia'}, {code: 'LS', name: 'Lesotho'},
            {code: 'LY', name: 'Libye'}, {code: 'MA', name: 'Maroc'},
            {code: 'MG', name: 'Madagascar'}, {code: 'ML', name: 'Mali'},
            {code: 'MR', name: 'Mauritanie'}, {code: 'MU', name: 'Maurice'},
            {code: 'MW', name: 'Malawi'}, {code: 'MZ', name: 'Mozambique'},
            {code: 'NA', name: 'Namibie'}, {code: 'NE', name: 'Niger'},
            {code: 'NG', name: 'Nigeria'}, {code: 'RW', name: 'Rwanda'},
            {code: 'SC', name: 'Seychelles'}, {code: 'SD', name: 'Soudan'},
            {code: 'SL', name: 'Sierra Leone'}, {code: 'SN', name: 'S√©n√©gal'},
            {code: 'SO', name: 'Somalie'}, {code: 'SS', name: 'Soudan du Sud'},
            {code: 'ST', name: 'S√£o Tom√©-et-Pr√≠ncipe'}, {code: 'SZ', name: 'Eswatini'},
            {code: 'TD', name: 'Tchad'}, {code: 'TG', name: 'Togo'},
            {code: 'TN', name: 'Tunisie'}, {code: 'TZ', name: 'Tanzanie'},
            {code: 'UG', name: 'Ouganda'}, {code: 'ZA', name: 'Afrique du Sud'},
            {code: 'ZM', name: 'Zambie'}, {code: 'ZW', name: 'Zimbabwe'}
        ];

        // Populate countries dropdown
        const countrySelect = document.getElementById('country');
        countries.sort((a, b) => a.name.localeCompare(b.name)).forEach(country => {
            const option = document.createElement('option');
            option.value = country.code;
            option.textContent = `${country.name} (${country.code})`;
            countrySelect.appendChild(option);
        });

        // API Base URL - Change this for production
        const API_URL = window.location.origin;

        // Form submission
        document.getElementById('predictionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const btn = document.getElementById('predictBtn');
            const errorMsg = document.getElementById('errorMessage');
            
            // Show loading
            btn.disabled = true;
            btn.innerHTML = '<i class="fas fa-spinner"></i> Calcul en cours...';
            btn.classList.add('loading');
            errorMsg.classList.remove('show');

            const data = {
                country_code: document.getElementById('country').value,
                season_name: document.getElementById('season').value,
                planting_month: parseInt(document.getElementById('plantingMonth').value),
                harvest_month: parseInt(document.getElementById('harvestMonth').value),
                area: parseFloat(document.getElementById('area').value),
                production_system: document.getElementById('system').value
            };

            try {
                const response = await fetch(`${API_URL}/predict`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });

                if (!response.ok) {
                    throw new Error('Erreur lors de la pr√©diction');
                }

                const result = await response.json();
                displayResults(result, data.area);

            } catch (error) {
                errorMsg.textContent = `‚ùå ${error.message}. V√©rifiez que l'API est en cours d'ex√©cution.`;
                errorMsg.classList.add('show');
            } finally {
                btn.disabled = false;
                btn.innerHTML = '<i class="fas fa-magic"></i> Pr√©dire le Rendement';
                btn.classList.remove('loading');
            }
        });

        function displayResults(result, area) {
            document.getElementById('placeholder').style.display = 'none';
            document.getElementById('results').classList.add('show');

            // Update values with animation
            const yieldEl = document.getElementById('yieldValue');
            yieldEl.textContent = result.predicted_yield.toFixed(2);
            
            document.getElementById('productionValue').textContent = 
                result.predicted_production.toLocaleString('fr-FR', {maximumFractionDigits: 0});
            document.getElementById('areaValue').textContent = 
                area.toLocaleString('fr-FR');

            // Model badge
            document.getElementById('modelBadge').innerHTML = 
                `<i class="fas fa-robot"></i> ${result.model_used}`;

            // Confidence badge
            const confidenceBadge = document.getElementById('confidenceBadge');
            confidenceBadge.textContent = `Confiance: ${result.confidence}`;
            confidenceBadge.className = 'confidence-badge';
            
            if (result.confidence === '√âlev√©') {
                confidenceBadge.classList.add('confidence-high');
            } else if (result.confidence === 'Moyen') {
                confidenceBadge.classList.add('confidence-medium');
            } else {
                confidenceBadge.classList.add('confidence-low');
            }
        }
    </script>
</body>
</html>
